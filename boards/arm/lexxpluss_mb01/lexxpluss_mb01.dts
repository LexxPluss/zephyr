/dts-v1/;
#include <st/f7/stm32f765Xg.dtsi>
#include <st/f7/stm32f765b(g-i)tx-pinctrl.dtsi>

/ {
	model = "LexxPluss Main Control Unit board";
	compatible = "st,stm32f765bg-lexxpluss";

	chosen {
		zephyr,console = &usart3;
		zephyr,shell-uart = &usart3;
		zephyr,sram = &sram0;
		zephyr,flash = &flash0;
		zephyr,dtcm = &dtcm;
		zephyr,can-primary = &can1;
	};
};

&clk_hse {
	clock-frequency = <DT_FREQ_M(8)>;
	status = "okay";
};

&pll {
	div-m = <8>;
	mul-n = <432>;
	div-p = <2>;
	div-q = <9>;
	clocks = <&clk_hse>;
	status = "okay";
};

&rcc {
	clocks = <&pll>;
	clock-frequency = <DT_FREQ_M(216)>;
	ahb-prescaler = <1>;
	apb1-prescaler = <4>;
	apb2-prescaler = <2>;
};

&usart1 {
	pinctrl-0 = <&usart1_tx_pa9 &usart1_rx_pa10 &usart1_cts_pa11 &usart1_rts_pa12>;
	current-speed = <115200>;
	status = "okay";
};

&usart2 {
	pinctrl-0 = <&usart2_tx_pd5 &usart2_rx_pd6 &usart2_cts_pd3 &usart2_rts_pd4>;
	current-speed = <115200>;
	status = "okay";
};

&usart3 {
	pinctrl-0 = <&usart3_tx_pd8 &usart3_rx_pd9>;
	current-speed = <115200>;
	status = "okay";
};

&spi2 {
	pinctrl-0 = <&spi2_mosi_pi3>;
	status = "okay";
	led_strip0: ws2812@0 {
		compatible = "worldsemi,ws2812-spi";
		label = "WS2812_0";
		reg = <0>;
		spi-max-frequency = <8000000>;
		chain-length = <40>;
		spi-one-frame = <0x7c>;
		spi-zero-frame = <0x60>;
	};
};

&spi3 {
	pinctrl-0 = <&spi3_mosi_pb5>;
	status = "okay";
	led_strip1: ws2812@1 {
		compatible = "worldsemi,ws2812-spi";
		label = "WS2812_1";
		reg = <0>;
		spi-max-frequency = <8000000>;
		chain-length = <40>;
		spi-one-frame = <0x7c>;
		spi-zero-frame = <0x60>;
	};
};
